<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>一款基于Python Flask的html机房管理系统 | EterIll
</title><meta name=description content="❤️丹恒·饮月"><script>window.siteConfig=JSON.parse('{"anchor_icon":null,"clipboard":{"copyright":{"content":"本文版权：本博客所有文章除特别声明外，均采用 BY-NC-SA 许可协议。转载请注明出处！","count":50,"enable":false},"fail":"复制失败 (ﾟ⊿ﾟ)ﾂ","success":"复制成功(*^▽^*)"},"code_block":{"expand":true},"icon_font":"4552607_tq6stt6tcg","outdate":{"daysago":180,"enable":false,"message":"本文最后更新于 {time}，请注意文中内容可能已经发生变化。"}}')</script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css?family=Mulish:400,400italic,700,700italic%7cNoto%20Serif%20SC:400,400italic,700,700italic%7c&amp;display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Mulish:400,400italic,700,700italic%7cNoto%20Serif%20SC:400,400italic,700,700italic%7c&amp;display=swap" media=print onload='this.media="all"'><link rel=preload href=//at.alicdn.com/t/c/font_4552607_tq6stt6tcg.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=stylesheet href=/css/loader.min.b4d12b611048c3c77cbfbf5e380e01a27648cf2e08de97a27f3b2661f022eb08.css><meta property="og:type" content="website"><meta property="og:title" content="一款基于Python Flask的html机房管理系统 | EterIll"><meta property="og:description" content="❤️丹恒·饮月"><meta property="og:url" content="https://eterill.xyz/hidden/document/"><meta property="og:site_name" content="EterIll Blogs - 艾特里尔の妙妙屋"><meta property="og:image" content="/"><meta property="article:author" content="EterIll"><meta property="article:published_time" content="2025-01-01T00:00:01+08:00"><meta property="article:modified_time" content="2025-01-01T00:00:01+08:00"><meta name=twitter:card content="summary"><meta name=twitter:image content="/"><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=/css/main.min.0edb656fe9891401365f946fc84364c8b814669714c6794a33d82753bb1a2b17.css><link rel=preload as=style href=https://npm.webcache.cn/photoswipe@5.4.4/dist/photoswipe.css onload='this.onload=null,this.rel="stylesheet"'><link rel=preload as=style href=https://npm.webcache.cn/katex@0.16.9/dist/katex.min.css onload='this.onload=null,this.rel="stylesheet"'><script src=https://npm.webcache.cn/pace-js@1.2.4/pace.min.js integrity=sha384-k6YtvFUEIuEFBdrLKJ3YAUbBki333tj1CSUisai5Cswsg9wcLNaPzsTHDswp4Az8 crossorigin=anonymous></script><link rel=stylesheet href=https://npm.webcache.cn/@reimujs/aos@0.1.0/dist/aos.css></head><body><div id=loader><div class="loading-left-bg loading-bg"></div><div class="loading-right-bg loading-bg"></div><div class=spinner-box><div class=loading-taichi><svg width="150" height="150" viewBox="0 0 1024 1024" class="icon" shape-rendering="geometricPrecision"><path d="M303.5 432a80 80 0 01-12 160 80 80 0 0112-160z" fill="#228898"/><path d="M512 65a447 447 0 010 894V929a417 417 0 000-834 417 417 0 000 834v30a447 447 0 010-894zm0 30A417 417 0 01929 512 208.5 208.5.0 01720.5 720.5V592a80 80 0 000-160 80 80 0 000 160V720.5A208.5 208.5.0 01512 512 208.5 208.5.0 00303.5 303.5 208.5 208.5.0 0095 512 417 417 0 01512 95z" fill="#228898"/></svg></div><div class=loading-word>Loading ...</div></div></div></div><script>var time=null,startLoading=()=>{time=Date.now(),document.getElementById("loader").classList.remove("loading")},endLoading=()=>{time?Date.now()-time>500?(time=null,document.body.style.overflow="auto",document.getElementById("loader").classList.add("loading")):(setTimeout(endLoading,500-(Date.now()-time)),time=null):(document.body.style.overflow="auto",document.getElementById("loader").classList.add("loading"))};window.addEventListener("DOMContentLoaded",endLoading),document.getElementById("loader").addEventListener("click",endLoading)</script><div id=copy-tooltip style="pointer-events:none;opacity:0;transition:all .2s ease;position:fixed;top:50%;left:50%;z-index:999;transform:translate(-50%,-50%);color:#fff;background:rgba(0,0,0,.5);padding:10px 15px;border-radius:10px"></div><div id=container><div id=wrap><div id=header-nav><nav id=main-nav><span class=main-nav-link-wrap><div class='main-nav-icon icon rotate'>&#xe62b;</div><a class=main-nav-link href=/>首页</a>
</span><span class=main-nav-link-wrap><div class='main-nav-icon icon rotate'>&#xe62b;</div><a class=main-nav-link href=/archives>归档</a>
</span><span class=main-nav-link-wrap><div class='main-nav-icon icon rotate'>&#xe62b;</div><a class=main-nav-link href=/about>关于</a>
</span><span class=main-nav-link-wrap><div class='main-nav-icon icon rotate'>&#xe62b;</div><a class=main-nav-link href=/friend>友链</a>
</span><a id=main-nav-toggle class=nav-icon></a></nav><nav id=sub-nav></nav></div><header id=header><picture><div></div><source media="(max-width: 479px)" srcset=/images/banner-600w.webp><div></div><source media="(max-width: 799px)" srcset=/images/banner-800w.webp><div></div><source media="(min-width: 800px)" srcset=/images/banner.webp><img fetchpriority=high src=/images/banner.webp alt="一款基于Python Flask的html机房管理系统"></picture><div id=header-outer><div id=header-title><a href=/ id=logo><h1 data-aos=slide-up>一款基于Python Flask的html机房管理系统</h1></a><h2 id=subtitle-wrap data-aos=slide-down></h2></div></div></header><main id=content><section id=main><article class="h-entry article" itemprop=blogPost itemscope itemtype=https://schema.org/BlogPosting><div class=article-inner data-aos=fade-up><div class=article-meta><div class=article-date><a href=https://eterill.xyz/hidden/document/ class=article-date-link data-aos=zoom-in><time datetime="2025-01-01 00:00:01 +0800 +0800" itemprop=datePublished>2025-01-01</time>
<time style=display:none id=post-update-time>2025-01-01</time></a></div><div class=article-category></div></div><div class=hr-line></div><div class="e-content article-entry" itemprop=articleBody><p>#一款基于Python Flask的html机房管理系统
作者：余承谦
指导教师：</p><h1 id=摘要><a class=header-anchor href=#%e6%91%98%e8%a6%81></a>摘要</h1><p>本文意在展示一种基于Python Flask的HTML技术实现的机房管理系统，含有简单的随堂小测功能，可选择的简易online judge功能以及简单的版本管理器。</p><h1 id=正文><a class=header-anchor href=#%e6%ad%a3%e6%96%87></a>正文</h1><h2 id=一引入><a class=header-anchor href=#%e4%b8%80%e5%bc%95%e5%85%a5></a>一、引入</h2><p>在上课的过程中，我发现老师在进行随堂小测来检测同学们的掌握程度时，采用的是基于 Excel 宏合并的方式来统计学生的答案。这个方法虽然可以实现基本的功能，但是却经常出现报错，导致数据的统计不准确，而且效率较低。在当堂练习中，Excel 的处理速度甚至会拖慢整个教学过程，影响了老师及时了解学生学习情况。因此，老师需要花费大量时间修复错误并重新计算数据。这种低效且容易出错的方式无法满足课堂上快速评估学生掌握程度的需求。</p><p>在与老师进行讨论后，我认为应该开发一个能够自动化、快速且稳定地统计答案的系统，以解决现有的种种问题。经过多次沟通，我决定创建一个专门针对机房管理与随堂测验的系统，以便在课堂中能更高效地进行学生测验、成绩管理、数据分析等工作。这个想法逐渐成型，最终确定了一个名为“机房管理系统”的项目（以下简称“本项目”）。本系统的目标是通过自动化的功能，减轻老师的负担，提升工作效率，让教学过程更加流畅。</p><p>在经过了详细的需求分析和可行性研究后，我开始规划系统的架构、功能模块以及技术选型，希望能够为老师们提供一个高效、简便、无忧的工具。</p><h2 id=二系统设计><a class=header-anchor href=#%e4%ba%8c%e7%b3%bb%e7%bb%9f%e8%ae%be%e8%ae%a1></a>二、系统设计</h2><h3 id=21-系统结构设计><a class=header-anchor href=#21-%e7%b3%bb%e7%bb%9f%e7%bb%93%e6%9e%84%e8%ae%be%e8%ae%a1></a>2.1 系统结构设计</h3><p>本系统的设计考虑了多方面的因素，包括机房网络环境、硬件配置、用户操作便利性等。</p><p><img src=./p2.1.1.png alt="图2.1.1 机房简易网络拓扑" title="图2.1.1 机房简易网络拓扑"></p><p>从图中可以看出，在不增加额外服务器的情况下，将教师机作为本系统的服务器，是一个较为可行的方案。考虑到机房使用的是静态 IP，这使得在局域网内部署一个小型的动态网站变得十分合适。此外，静态 IP 还可以使得机房内部的设备能够通过内网进行稳定的连接，避免了外部访问带来的不稳定因素。</p><p>由于机房内网络环境较为封闭，使用私有 DNS 能够提供更加稳定的域名解析服务。通过私有 DNS，可以更方便地实现内部域名的管理，而无需依赖外部 DNS 服务器，从而提升了系统的访问效率和安全性。我们也可以便捷的为系统绑定例如<code>jf.cloud</code>这样简洁的域名而无需付费购买域名。</p><h3 id=22-后端的选择><a class=header-anchor href=#22-%e5%90%8e%e7%ab%af%e7%9a%84%e9%80%89%e6%8b%a9></a>2.2 后端的选择</h3><p>对于本项目来说，选择适合的后端技术框架至关重要。在多种后端框架中，我考虑了以下几个技术栈：</p><ul><li><strong>Node.js</strong>：作为一个基于事件驱动的非阻塞 I/O 模型，Node.js 非常适合处理高并发请求。如果我们的系统面临大量同时在线的用户访问，Node.js 可以提供较好的性能。</li><li><strong>PHP</strong>：PHP 是一种成熟且广泛使用的 Web 开发语言，具有快速的开发周期和易于部署的优势。对于一些中小型项目来说，PHP 是一种常见的选择。</li><li><strong>Java</strong>：Java 强大的后台处理能力和稳定性使其成为开发大规模应用的首选框架，特别是在企业级应用中表现突出。然而，Java 的开发周期较长，且对开发者的技能要求较高。</li></ul><p>在综合考虑了易用性、开发效率、学习曲线等因素后，我最终选择了 <strong>Flask</strong> 框架。Flask 是一个轻量级的 Python Web 框架，具有以下优点：</p><ul><li><strong>开发便捷性</strong>：Flask 的代码简洁且易于理解，非常适合快速开发和部署。它的学习曲线较低，适合我在较短时间内完成开发。</li><li><strong>丰富的扩展库</strong>：Flask 拥有丰富的第三方扩展库，可以很容易地集成数据库、表单验证、身份验证等功能，能够满足本项目的基本需求。</li><li><strong>教学功能</strong>：由于课本上使用 Flask 作为教学内容，因此在教学过程中，使用 Flask 框架可以让我将系统代码与课堂内容直接结合，起到教学和项目开发双重作用。</li></ul><p>Flask 的优点不仅体现在开发周期短、功能强大上，还在于其能够灵活地扩展和自定义，特别适合像本项目这样的小型应用。</p><h3 id=23-前端框架的选择><a class=header-anchor href=#23-%e5%89%8d%e7%ab%af%e6%a1%86%e6%9e%b6%e7%9a%84%e9%80%89%e6%8b%a9></a>2.3 前端框架的选择</h3><p>前端开发框架的选择对于系统的用户体验至关重要。经过深思熟虑，我决定不使用常见的前端框架（如 jQuery、React、Vue 等），而是采用 <strong>纯后端渲染</strong> 的方式来实现大部分的逻辑。具体原因如下：</p><ul><li><strong>网络环境的限制</strong>：由于机房内的网络环境相对特殊，部分机房存在带宽限制，异步请求可能导致数据传输不稳定，影响用户体验。通过纯后端渲染，我们可以减少前后端通信的复杂性，避免由于网络波动导致的延迟等问题。</li><li><strong>简化开发过程</strong>：不使用复杂的前端框架，减少了对前端的依赖，整个开发过程更加集中在后端逻辑上。这不仅可以减少前端开发的成本，也能加快整体开发进度。</li><li><strong>避免异步问题</strong>：很多前端框架需要使用 Ajax 进行数据交互，而这类异步请求在某些网络环境中会带来不可预见的错误。为了避免这类问题，我们通过纯后端渲染的方式，直接将页面内容渲染并展示给用户，避免了异步请求的复杂性。</li><li><strong>降低开发成本</strong>：不依赖前端框架，意味着不需要学习和维护过多的前端技术栈。这不仅节省了开发时间，还能减少技术债务，提高代码的可维护性。</li></ul><p>通过这种方式，我们能实现一个简单而稳定的用户界面，降低了系统出错的几率，并使得系统在机房内的实际运行更加顺畅。</p><h3 id=24-系统功能模块><a class=header-anchor href=#24-%e7%b3%bb%e7%bb%9f%e5%8a%9f%e8%83%bd%e6%a8%a1%e5%9d%97></a>2.4 系统功能模块</h3><p>本项目的核心功能模块包括用户管理、考试管理、数据统计、网络监控等四大模块，每个模块的功能如下：</p><h4 id=241-用户管理><a class=header-anchor href=#241-%e7%94%a8%e6%88%b7%e7%ae%a1%e7%90%86></a>2.4.1 用户管理</h4><p>用户管理模块负责管理教师和学生的账号信息。这个模块的主要功能包括：</p><ul><li><strong>账号注册</strong>：教师可以通过系统快速注册学生，填写必要的个人信息，如姓名、学号等。</li><li><strong>登录系统</strong>：教师和学生可以通过用户名和密码进行登录，系统根据用户类型给予不同权限。</li><li><strong>权限管理</strong>：教师具有比学生更多的权限，包括创建考试、查看成绩等操作。学生仅能查看个人成绩和提交作业。</li></ul><h4 id=242-考试管理><a class=header-anchor href=#242-%e8%80%83%e8%af%95%e7%ae%a1%e7%90%86></a>2.4.2 考试管理</h4><p>考试管理模块是系统的核心功能之一，教师可以通过该模块来创建和发布考试：</p><ul><li><strong>考试创建</strong>：教师可以根据教学需要创建不同类型的考试。</li><li><strong>考试管理</strong>：教师可以对正在进行的考试进行实时管理，包括暂停考试、修改试题、查看考试进度等。</li></ul><h4 id=243-数据统计><a class=header-anchor href=#243-%e6%95%b0%e6%8d%ae%e7%bb%9f%e8%ae%a1></a>2.4.3 数据统计</h4><p>数据统计模块用于对学生的答题情况进行实时分析，并生成统计报告：</p><ul><li><strong>自动评分</strong>：系统会根据学生的答题情况自动进行评分，避免人工计算错误。</li><li><strong>成绩分析</strong>：系统可以展示每个学生的成绩分布，帮助教师了解学生整体表现。还可以展示图表、分析共通错误等。</li></ul><h2 id=三代码设计><a class=header-anchor href=#%e4%b8%89%e4%bb%a3%e7%a0%81%e8%ae%be%e8%ae%a1></a>三、代码设计</h2><blockquote><p>注：此处代码有精简</p></blockquote><h3 id=31-io重定向><a class=header-anchor href=#31-io%e9%87%8d%e5%ae%9a%e5%90%91></a>3.1 IO重定向</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>##Reset IO Wrapper to deal with iPython issues.##</span>
</span></span><span class=line><span class=cl><span class=c1>##exec &#34;sys.stdout=sys.__stdout__&#34; if console restart.##</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>ifdef</span><span class=p>(</span><span class=n>name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>varl</span><span class=o>=</span><span class=nb>globals</span><span class=p>()</span> <span class=k>if</span> <span class=n>name</span> <span class=ow>in</span> <span class=nb>globals</span><span class=p>()</span> <span class=k>else</span> <span class=nb>locals</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>name</span> <span class=ow>in</span> <span class=n>varl</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>ifdef</span><span class=p>(</span><span class=s2>&#34;mdoi&#34;</span><span class=p>)</span> <span class=ow>or</span> <span class=n>ifdef</span><span class=p>(</span><span class=s2>&#34;mdei&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>sys</span><span class=o>.</span><span class=n>stdout</span><span class=o>=</span><span class=n>sys</span><span class=o>.</span><span class=n>__stdout__</span>
</span></span><span class=line><span class=cl>    <span class=n>sys</span><span class=o>.</span><span class=n>stderr</span><span class=o>=</span><span class=n>sys</span><span class=o>.</span><span class=n>__stderr__</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;[INIT]Warn:StdIO Modified.Reseted to prevent iPython issuses.&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>在Anaconda环境中由于iPython已经重定向了输入输出，强行重定向以及残留的重定向会导致内核崩溃重启。这里用于重置IO，防止崩溃。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>stdo</span><span class=o>=</span><span class=n>sys</span><span class=o>.</span><span class=n>__stdout__</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>mdo</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>logs</span><span class=o>=</span><span class=s2>&#34;========log start========</span><span class=se>\n</span><span class=s2>(^v^)Welcome to EterIll WebConsle Service.</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>write</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>string</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>sys</span><span class=o>.</span><span class=n>__stdout__</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>string</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=s2>&#34;WARN&#34;</span> <span class=ow>in</span> <span class=n>string</span><span class=p>:</span><span class=n>string</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;&lt;span&gt;</span><span class=si>{</span><span class=n>string</span><span class=si>}</span><span class=s2>&lt;/span&gt;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>logs</span><span class=o>+=</span><span class=p>(</span><span class=n>string</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>flush</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>sys</span><span class=o>.</span><span class=n>__stdout__</span><span class=o>.</span><span class=n>flush</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>logs</span><span class=o>+=</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>mdoi</span><span class=o>=</span><span class=n>mdo</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>sys</span><span class=o>.</span><span class=n>stdout</span><span class=o>=</span><span class=n>mdoi</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>mde</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>write</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>string</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>sys</span><span class=o>.</span><span class=n>__stdout__</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>string</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>mdoi</span><span class=o>.</span><span class=n>logs</span><span class=o>+=</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&lt;span&gt;</span><span class=si>{</span><span class=n>string</span><span class=si>}</span><span class=s2>&lt;/span&gt;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>flush</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>sys</span><span class=o>.</span><span class=n>__stdout__</span><span class=o>.</span><span class=n>flush</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>mdoi</span><span class=o>.</span><span class=n>flush</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>mdei</span><span class=o>=</span><span class=n>mde</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>sys</span><span class=o>.</span><span class=n>stderr</span><span class=o>=</span><span class=n>mdei</span>
</span></span><span class=line><span class=cl><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span><span class=c1>#等待生效（旧电脑不等待可能会崩溃）</span>
</span></span></code></pre></div><p>这里定义了一个外置的日志模块，重定向了输出流和报错流，方便管理员在线查看日志。程序也可以直接使用print语句输出日志，方便调试。</p><h3 id=32-日志读取><a class=header-anchor href=#32-%e6%97%a5%e5%bf%97%e8%af%bb%e5%8f%96></a>3.2 日志读取</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1>##ENVIRONMENT CONFIG##</span>
</span></span><span class=line><span class=cl><span class=c1>#在这里预定义默认设置，防止日志无法读取引起崩溃。（代码略）</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=s2>&#34;env.json&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;env.json&#34;</span><span class=p>,</span><span class=s2>&#34;r&#34;</span><span class=p>)</span> <span class=k>as</span> <span class=n>cfg</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>env</span><span class=o>=</span><span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>cfg</span><span class=o>.</span><span class=n>read</span><span class=p>())</span><span class=c1>#读取日志</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>getip</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>popen</span><span class=p>(</span><span class=s2>&#34;ipconfig&#34;</span><span class=p>,</span><span class=s2>&#34;r&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>s</span><span class=o>=</span><span class=n>findall</span><span class=p>(</span><span class=s1>&#39;^\s*IPv4.*&#39;</span><span class=p>,</span><span class=n>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>s</span><span class=p>)</span><span class=o>!=</span><span class=mi>0</span><span class=p>:</span><span class=k>return</span> <span class=n>findall</span><span class=p>(</span><span class=s1>&#39;:.*\d$&#39;</span><span class=p>,</span><span class=n>s</span><span class=p>[</span><span class=mi>0</span><span class=p>])[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>strip</span><span class=p>(</span><span class=s1>&#39;: &#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>app_host_ip</span> <span class=o>=</span> <span class=p>(</span><span class=n>app_host_ip</span> <span class=k>if</span> <span class=n>app_host_ip</span> <span class=k>else</span> <span class=n>getip</span><span class=p>())</span><span class=c1>#使用配置IPv4地址，否则自动获取IPv4地址</span>
</span></span></code></pre></div><p>这里是用了系统<code>ipconfig</code>命令配合<code>RegEx</code>模块来实现自动获取IPv4地址。</p><h3 id=33-数据类定义><a class=header-anchor href=#33-%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%ae%9a%e4%b9%89></a>3.3 数据类定义</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>user</span><span class=p>:</span><span class=c1>#用户数据类</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>filename</span><span class=o>=</span><span class=n>file_db</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1>#读取方法，使用user(filename)可以快速构造用户库实例</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>filename</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1>#保存方法，使用user.save(filename)可以快速保存</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>login</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>username</span><span class=p>,</span><span class=n>password</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1>#登录方法，返回一个session，用于用户认证</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>uname</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>n</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1>#鉴权方法，判断登录信息并返回用户名，暂时没有做cookie重放攻击防护，用户登出自动销毁登录信息。</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>name</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>s</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1>#显示方法，用于用户名显示</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>exam</span><span class=p>:</span><span class=c1>#考试数据类</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>name</span><span class=p>,</span><span class=n>numq</span><span class=p>,</span><span class=n>numa</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1>#构造方法</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>init</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>l_ans</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1>#写入答案方法，命名init是相对用户而言</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>ename</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>nm</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1>#判断用户是否完成该考试</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>gi</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>name</span><span class=p>,</span><span class=n>l_ans</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1>#用户递交答案方法</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>grade</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span><span class=n>name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1>#成绩计算方法，用于显示成绩</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>anal</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=c1>#分析方法，用于向管理员展示分析</span>
</span></span></code></pre></div><h3 id=34-绘制图表><a class=header-anchor href=#34-%e7%bb%98%e5%88%b6%e5%9b%be%e8%a1%a8></a>3.4 绘制图表</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>genbar</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>ff</span><span class=o>=</span><span class=n>BytesIO</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>plt</span><span class=o>.</span><span class=n>bar</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>,</span><span class=n>color</span><span class=o>=</span><span class=s1>&#39;black&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>plt</span><span class=o>.</span><span class=n>savefig</span><span class=p>(</span><span class=n>ff</span><span class=p>,</span><span class=nb>format</span><span class=o>=</span><span class=s2>&#34;png&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>ff</span><span class=o>.</span><span class=n>seek</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>s</span><span class=o>=</span><span class=nb>str</span><span class=p>(</span><span class=n>b64encode</span><span class=p>(</span><span class=n>ff</span><span class=o>.</span><span class=n>getvalue</span><span class=p>()),</span><span class=s2>&#34;utf-8&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>s</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;data:image/JPEG;base64,</span><span class=si>{</span><span class=n>s</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=sa>f</span><span class=s1>&#39;&lt;img src=&#34;</span><span class=si>{</span><span class=n>s</span><span class=si>}</span><span class=s1>&#34;&gt;&lt;/img&gt;&#39;</span>
</span></span></code></pre></div><p>这里使用BytesIO开辟Buffer，用pyplotlib绘图后存入Buffer，用base64转换为HTML的dataURL。</p><h3 id=35-视图函数><a class=header-anchor href=#35-%e8%a7%86%e5%9b%be%e5%87%bd%e6%95%b0></a>3.5 视图函数</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/view&#34;</span><span class=p>,</span><span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;GET&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=c1>#查看成绩分析，仅限管理员</span>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/remove&#34;</span><span class=p>,</span><span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;GET&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=c1>#删除考试，仅限管理员</span>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/showans&#34;</span><span class=p>,</span><span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;GET&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=c1>#控制答案是否公示，仅限管理员</span>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/new&#34;</span><span class=p>,</span><span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;GET&#34;</span><span class=p>,</span><span class=s2>&#34;POST&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=c1>#新建测试，仅限管理员</span>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/newstu&#34;</span><span class=p>,</span><span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;GET&#34;</span><span class=p>,</span><span class=s2>&#34;POST&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=c1>#新建学生，仅限管理员</span>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/importstu&#34;</span><span class=p>,</span><span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;GET&#34;</span><span class=p>,</span><span class=s2>&#34;POST&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=c1>#导入学生，仅限管理员</span>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/login&#34;</span><span class=p>,</span><span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;GET&#34;</span><span class=p>,</span><span class=s2>&#34;POST&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=c1>#登录，并写入cookie</span>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/quit&#34;</span><span class=p>,</span><span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;GET&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=c1>#退出登录</span>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#自动redirect到相应视图，方便用户。</span>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/main&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>#主页</span>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/exam&#34;</span><span class=p>,</span><span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;GET&#34;</span><span class=p>,</span><span class=s2>&#34;POST&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=c1>#考试页面</span>
</span></span><span class=line><span class=cl><span class=nd>@app.route</span><span class=p>(</span><span class=s2>&#34;/console&#34;</span><span class=p>,</span><span class=n>methods</span><span class=o>=</span><span class=p>[</span><span class=s2>&#34;GET&#34;</span><span class=p>,</span><span class=s2>&#34;POST&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=c1>#控制台，仅限管理员</span>
</span></span></code></pre></div><h3 id=36-结束flask服务器><a class=header-anchor href=#36-%e7%bb%93%e6%9d%9fflask%e6%9c%8d%e5%8a%a1%e5%99%a8></a>3.6 结束flask服务器</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>shutdown</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>shutdown_func</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>environ</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;werkzeug.server.shutdown&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>shutdown_func</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>raise</span> <span class=ne>RuntimeError</span><span class=p>(</span><span class=s1>&#39;Not running with the Werkzeug Server&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>shutdown_func</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span>
</span></span></code></pre></div><p>这段代码利用flask底层采用werkzerg服务器的特性，调用werkzerg的shutdown方法主动关闭服务器，安全性更高。</p><h3 id=37-简易cli><a class=header-anchor href=#37-%e7%ae%80%e6%98%93cli></a>3.7 简易cli</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>consolecmd</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=n>consoleconfirm</span><span class=o>=</span><span class=kc>False</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>etwc_exec</span><span class=p>(</span><span class=n>cmd</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>global</span> <span class=n>consolecmd</span>
</span></span><span class=line><span class=cl>    <span class=k>global</span> <span class=n>consoleconfirm</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>consoleconfirm</span> <span class=ow>or</span> <span class=n>cmd</span> <span class=ow>in</span> <span class=p>[</span><span class=s2>&#34;Y&#34;</span><span class=p>,</span><span class=s2>&#34;n&#34;</span><span class=p>,</span><span class=s1>&#39;N&#39;</span><span class=p>]:</span><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[Console]Confirm&gt;</span><span class=si>{</span><span class=n>cmd</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;[Console] &gt;&lt;span&gt;</span><span class=si>{</span><span class=n>cmd</span><span class=si>}</span><span class=s2>&lt;/span&gt;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>cmd</span><span class=o>==</span><span class=s2>&#34;exit&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>consoleconfirm</span><span class=o>=</span><span class=kc>True</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;[Console]&lt;span&gt;EXIT?(Y/n)&lt;/span&gt;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>consolecmd</span><span class=o>==</span><span class=s2>&#34;exit&#34;</span> <span class=ow>and</span> <span class=n>cmd</span><span class=o>==</span><span class=s2>&#34;Y&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>consoleconfirm</span><span class=o>=</span><span class=n>false</span>
</span></span><span class=line><span class=cl>        <span class=n>s</span><span class=o>=</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>savethread</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>s</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>shutdown</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>cmd</span><span class=o>==</span><span class=s2>&#34;save&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>s</span><span class=o>=</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>savethread</span><span class=p>)</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>consoleconfirm</span><span class=o>=</span><span class=kc>False</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>cmd</span><span class=p>[:</span><span class=mi>5</span><span class=p>]</span><span class=o>==</span><span class=s2>&#34;exec &#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>save_exec</span><span class=p>(</span><span class=n>cmd</span><span class=p>[</span><span class=mi>5</span><span class=p>:])</span>
</span></span><span class=line><span class=cl>        <span class=n>consoleconfirm</span><span class=o>=</span><span class=kc>False</span>
</span></span><span class=line><span class=cl>    <span class=k>elif</span> <span class=n>cmd</span><span class=p>[:</span><span class=mi>5</span><span class=p>]</span><span class=o>==</span><span class=s2>&#34;exams&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>consoleconfirm</span><span class=o>=</span><span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>cmd</span><span class=p>)</span><span class=o>&gt;</span><span class=mi>6</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1>#处理命令，内容略</span>
</span></span><span class=line><span class=cl>            <span class=k>except</span><span class=p>:</span><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;[WARNING]Error occured!</span><span class=se>\n</span><span class=s2>&#34;</span><span class=o>+</span><span class=n>traceback</span><span class=o>.</span><span class=n>format_exc</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span><span class=n>consoleconfirm</span><span class=o>=</span><span class=kc>False</span>
</span></span><span class=line><span class=cl>    <span class=n>consolecmd</span><span class=o>=</span><span class=n>cmd</span>
</span></span></code></pre></div><p>这段代码接收来自网页cli界面的命令并执行。save_exec中通过正则表达式去除危险的命令，并自动捕获报错。</p><h2 id=四运行与使用><a class=header-anchor href=#%e5%9b%9b%e8%bf%90%e8%a1%8c%e4%b8%8e%e4%bd%bf%e7%94%a8></a>四、运行与使用</h2><h3 id=41-运行环境配置><a class=header-anchor href=#41-%e8%bf%90%e8%a1%8c%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae></a>4.1 运行环境配置</h3><h4 id=411-运行所需模块><a class=header-anchor href=#411-%e8%bf%90%e8%a1%8c%e6%89%80%e9%9c%80%e6%a8%a1%e5%9d%97></a>4.1.1 运行所需模块</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>flask (Flask,request,redirect)：网页服务器框架
</span></span><span class=line><span class=cl>threading (Thread)：多线程
</span></span><span class=line><span class=cl>os (popen,path,getcwd,system)：操作系统
</span></span><span class=line><span class=cl>re (findall)：正则表达式匹配
</span></span><span class=line><span class=cl>random (randint)：随机数生成，用于账户安全
</span></span><span class=line><span class=cl>pickle (dump,load)：python对象存储
</span></span><span class=line><span class=cl>base64 (b64encode)：图像转换url
</span></span><span class=line><span class=cl>io (BytesIO)：文件缓冲
</span></span><span class=line><span class=cl>time (sleep)：等待
</span></span><span class=line><span class=cl>sys：系统
</span></span><span class=line><span class=cl>json：json读写，用于配置项
</span></span><span class=line><span class=cl>traceback：报错追踪
</span></span><span class=line><span class=cl>matplotlib.pyplot：绘图
</span></span></code></pre></div><h4 id=412-必要配置项envjson><a class=header-anchor href=#412-%e5%bf%85%e8%a6%81%e9%85%8d%e7%bd%ae%e9%a1%b9envjson></a>4.1.2 必要配置项（env.json）</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>app_name</span><span class=o>=</span><span class=s2>&#34;Instance&#34;</span> <span class=c1>#Flask实例名</span>
</span></span><span class=line><span class=cl><span class=n>app_page_title</span><span class=o>=</span><span class=s2>&#34;机房考试系统&#34;</span> <span class=c1>#HTML页面标题</span>
</span></span><span class=line><span class=cl><span class=n>app_host_ip</span><span class=o>=</span><span class=s2>&#34;&#34;</span> <span class=c1>#Flask IP地址，空字符串表示自动读取ipconfig</span>
</span></span><span class=line><span class=cl><span class=n>app_host_port</span><span class=o>=</span><span class=mi>8000</span> <span class=c1>#Flask端口</span>
</span></span><span class=line><span class=cl><span class=n>file_db</span><span class=o>=</span><span class=s2>&#34;ss.bin&#34;</span><span class=c1>#数据库路径</span>
</span></span><span class=line><span class=cl><span class=n>file_user</span><span class=o>=</span><span class=s2>&#34;usr.bin&#34;</span><span class=c1>#用户数据库路径</span>
</span></span><span class=line><span class=cl><span class=n>admin_password</span><span class=o>=</span><span class=s2>&#34;Xjhcy@admin123&#34;</span><span class=c1>#管理员密码</span>
</span></span></code></pre></div><blockquote><p>编写json时请不要包含注释。如果使用版本管理器，第一次启动时会自动生成配置项文件。您也可以运行<code>setup.py</code>自动生成一份。</p></blockquote><h4 id=413-直接启动><a class=header-anchor href=#413-%e7%9b%b4%e6%8e%a5%e5%90%af%e5%8a%a8></a>4.1.3 直接启动</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ python3 xxxx.py
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-cmd data-lang=cmd><span class=line><span class=cl>python xxxx.py
</span></span></code></pre></div><blockquote><p>警告！本系统涉及文件IO、Buffer读写、控制台操作，除非必要，请您不要使用管理员权限。</p></blockquote><p>其中xxxx需要替换为具体文件名，例如core-1.2.5-simple</p><h4 id=414-使用版本管理器><a class=header-anchor href=#414-%e4%bd%bf%e7%94%a8%e7%89%88%e6%9c%ac%e7%ae%a1%e7%90%86%e5%99%a8></a>4.1.4 使用版本管理器</h4><p>项目内自带了我自己编写的开源简易版本管理器“<code>EterIll WebApp Launcher</code>”，这个管理器会在<code>localhost:5678</code>上建立管理面板网页，可以简易快捷地管理版本。<br>管理器会自动启动最新版本，也可以选择旧版本。不同版本不能同时运行。</p><p><img src=./WAL.png alt="EterIll WebApp Launcher的运行截图" title="EterIll WebApp Launcher的运行截图"></p><blockquote><p>this part is under writing.</p></blockquote><h2 id=五总结与展望><a class=header-anchor href=#%e4%ba%94%e6%80%bb%e7%bb%93%e4%b8%8e%e5%b1%95%e6%9c%9b></a>五、总结与展望</h2><p>本项目通过对机房管理和随堂小测的自动化处理，解决了传统 Excel 宏处理方式中的种种问题，极大提高了教学效率和数据准确性。通过系统的设计与开发，我不仅为教师提供了更便捷的工具，也为学生创造了更公平的考试环境。</p><p>未来，我计划对系统进行进一步的优化与扩展：</p><ol><li><strong>功能扩展</strong>：增加学生自助选课、成绩分析等功能，进一步提升系统的综合性能。</li><li><strong>系统优化</strong>：针对不同的机房网络环境进行更多优化，确保系统的高效运行。</li><li><strong>跨平台支持</strong>：将系统扩展至更多平台，如移动端、桌面端等，以适应不同的使用场景。</li></ol><p>通过不断完善和升级，我相信本项目将为学校的教学工作提供更加高效、智能的解决方案。</p></div><footer class=article-footer><ul class=article-tag-list itemprop=keywords></ul></footer></div></article></section><aside id=sidebar><div class=sidebar-wrapper><div class=sidebar-wrap data-aos=fade-up><div class=sidebar-author><img data-src=/avatar/avatar.webp data-sizes=auto alt=EterIll class=lazyload><div class=sidebar-author-name>EterIll</div><div class=sidebar-description>❤️丹恒·饮月</div></div><div class=sidebar-state><div class=sidebar-state-article><div>文章</div><div class=sidebar-state-number>20</div></div><div class=sidebar-state-category><div>分类</div><div class=sidebar-state-number>1</div></div><div class=sidebar-state-tag><div>标签</div><div class=sidebar-state-number>2</div></div></div><div class=sidebar-social><div class="icon-bilibili sidebar-social-icon"><a href=https://space.bilibili.com/493559409 itemprop=url target=_blank aria-label=bilibili rel="noopener external nofollow noreferrer"></a></div><div class="icon-email sidebar-social-icon"><a href=mailto:eterill@hotmail.com itemprop=url target=_blank aria-label=email rel="noopener external nofollow noreferrer"></a></div><div class="icon-github sidebar-social-icon"><a href=https://github.com/EternalIllusion itemprop=url target=_blank aria-label=github rel="noopener external nofollow noreferrer"></a></div><div class="icon-twitter sidebar-social-icon"><a href=https://x.com/Eterillusion itemprop=url target=_blank aria-label=twitter rel="noopener external nofollow noreferrer"></a></div></div><div class=sidebar-menu><div class=sidebar-menu-link-wrap><a class=sidebar-menu-link-dummy href=/ aria-label=首页></a><div class='sidebar-menu-icon icon rotate'>&#xe62b;</div><div class=sidebar-menu-link>首页</div></div><div class=sidebar-menu-link-wrap><a class=sidebar-menu-link-dummy href=/archives aria-label=归档></a><div class='sidebar-menu-icon icon rotate'>&#xe62b;</div><div class=sidebar-menu-link>归档</div></div><div class=sidebar-menu-link-wrap><a class=sidebar-menu-link-dummy href=/about aria-label=关于></a><div class='sidebar-menu-icon icon rotate'>&#xe62b;</div><div class=sidebar-menu-link>关于</div></div><div class=sidebar-menu-link-wrap><a class=sidebar-menu-link-dummy href=/friend aria-label=友链></a><div class='sidebar-menu-icon icon rotate'>&#xe62b;</div><div class=sidebar-menu-link>友链</div></div></div></div></div><div class=widget-wrapper><div class=widget-wrap data-aos=fade-up><h3 class=widget-title>分类</h3><div class=widget><ul class=category-list><li class=category-list-item><a class=category-list-link href=/categories/linux/>Linux</a></li></ul></div></div></div><div class=widget-wrapper><div class=widget-wrap data-aos=fade-up><h3 class=widget-title>标签</h3><div class=widget><ul class=tag-list itemprop=keywords><li class=tag-item><a class=tag-link href=/tags/linux/ aria-label="标签: Linux">Linux</a></li><li class=tag-item><a class=tag-link href=/tags/%E6%95%99%E7%A8%8B/ aria-label="标签: 教程">教程</a></li></ul></div></div></div><div class=widget-wrapper><div class=widget-wrap data-aos=fade-up><h3 class=widget-title>标签云</h3><div class="widget tagcloud"><a style=font-size:10px href=/tags/linux/ aria-label="标签: Linux">Linux</a>
<a style=font-size:10px href=/tags/%E6%95%99%E7%A8%8B/ aria-label="标签: 教程">教程</a></div></div></div><div class=widget-wrapper><div class=widget-wrap data-aos=fade-up><h3 class=widget-title>最新文章</h3><div class=widget><ul><li><a href=https://eterill.xyz/post/linuxnoob01/>Linux系统从入门到入土1-基础操作</a></li><li><a href=https://eterill.xyz/post/pythonimages/>Python资源合集（持续更新）</a></li><li><a href=https://eterill.xyz/post/pywin32/>PyWin32自用开发参考</a></li><li><a href=https://eterill.xyz/post/winltscstore/>Windows LTSC 安装微软商店</a></li><li><a href=https://eterill.xyz/post/readaboutme/>个人介绍|Personal Info</a></li></ul></div></div></div></aside></main><footer id=footer><div style=width:100%;overflow:hidden><div class=footer-line></div></div><div id=footer-info><div><span class=icon-copyright></span>
2024 -
2025
<span class="footer-info-sep rotate"></span>
EterIll</div><div>基于&nbsp;<a href=https://gohugo.io/ target=_blank>Hugo</a>&nbsp; Theme.<a href=https://github.com/D-Sketon/hugo-theme-reimu target=_blank>Reimu</a></div><div><span class=icon-brush>&nbsp;
842
</span>&nbsp;|&nbsp;
<span class=icon-coffee>&nbsp;
00:09</span></div><div><span class=icon-eye></span>
<span id=busuanzi_container_site_pv>总访问量&nbsp;<span id=busuanzi_value_site_pv></span></span>
&nbsp;|&nbsp;
<span class=icon-user></span>
<span id=busuanzi_container_site_uv>总访客量&nbsp;<span id=busuanzi_value_site_uv></span></span></div></div></footer><div class=sidebar-top><div class="sidebar-top-taichi rotate"></div><div class=arrow-up></div></div><div id=mask class=hide></div></div><nav id=mobile-nav><div class=sidebar-wrap><div class=sidebar-author><img data-src=/avatar/avatar.webp data-sizes=auto alt=EterIll class=lazyload><div class=sidebar-author-name>EterIll</div><div class=sidebar-description>❤️丹恒·饮月</div></div><div class=sidebar-state><div class=sidebar-state-article><div>文章</div><div class=sidebar-state-number>20</div></div><div class=sidebar-state-category><div>分类</div><div class=sidebar-state-number>1</div></div><div class=sidebar-state-tag><div>标签</div><div class=sidebar-state-number>2</div></div></div><div class=sidebar-social><div class="icon-bilibili sidebar-social-icon"><a href=https://space.bilibili.com/493559409 itemprop=url target=_blank aria-label=bilibili rel="noopener external nofollow noreferrer"></a></div><div class="icon-email sidebar-social-icon"><a href=mailto:eterill@hotmail.com itemprop=url target=_blank aria-label=email rel="noopener external nofollow noreferrer"></a></div><div class="icon-github sidebar-social-icon"><a href=https://github.com/EternalIllusion itemprop=url target=_blank aria-label=github rel="noopener external nofollow noreferrer"></a></div><div class="icon-twitter sidebar-social-icon"><a href=https://x.com/Eterillusion itemprop=url target=_blank aria-label=twitter rel="noopener external nofollow noreferrer"></a></div></div><div class=sidebar-menu><div class=sidebar-menu-link-wrap><a class=sidebar-menu-link-dummy href=/ aria-label=首页></a><div class='sidebar-menu-icon icon rotate'>&#xe62b;</div><div class=sidebar-menu-link>首页</div></div><div class=sidebar-menu-link-wrap><a class=sidebar-menu-link-dummy href=/archives aria-label=归档></a><div class='sidebar-menu-icon icon rotate'>&#xe62b;</div><div class=sidebar-menu-link>归档</div></div><div class=sidebar-menu-link-wrap><a class=sidebar-menu-link-dummy href=/about aria-label=关于></a><div class='sidebar-menu-icon icon rotate'>&#xe62b;</div><div class=sidebar-menu-link>关于</div></div><div class=sidebar-menu-link-wrap><a class=sidebar-menu-link-dummy href=/friend aria-label=友链></a><div class='sidebar-menu-icon icon rotate'>&#xe62b;</div><div class=sidebar-menu-link>友链</div></div></div></div></nav></div><script src=https://npm.webcache.cn/lazysizes@5.3.2/lazysizes.min.js integrity=sha384-3gT/vsepWkfz/ff7PpWNUeMzeWoH3cDhm/A8jM7ouoAK0/fP/9bcHHR5kHq2nf+e crossorigin=anonymous></script><script src=https://npm.webcache.cn/clipboard@2.0.11/dist/clipboard.min.js integrity=sha384-J08i8An/QeARD9ExYpvphB8BsyOj3Gh2TSh1aLINKO3L0cMSH2dN3E22zFoXEi0Q crossorigin=anonymous></script><script src=/js/main.js integrity crossorigin=anonymous></script><script src=/js/aos.js integrity crossorigin=anonymous></script><script>var aosInit=()=>{AOS.init({duration:1e3,easing:"ease",once:!0,offset:50})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",aosInit):aosInit()</script><script src=/js/pjax_main.js integrity crossorigin=anonymous data-pjax></script><script src=https://npm.webcache.cn/mouse-firework@0.0.6/dist/index.umd.js integrity=sha384-vkGvf25gm1C1PbcoD5dNfc137HzNL/hr1RKA5HniJOaawtvUmH5lTVFgFAruE9Ge crossorigin=anonymous></script><script>if(window.firework){const e=JSON.parse('{"excludeelements":["a","button"],"particles":[{"colors":["#228898","#309FB1","#54B8C8","#5AC4D5"],"duration":[1200,1800],"easing":"easeOutExpo","move":["emit"],"number":20,"shape":"circle","shapeOptions":{"alpha":[0.3,0.5],"radius":[16,32]}},{"colors":["#ff0000"],"duration":[1200,1800],"easing":"easeOutExpo","move":["diffuse"],"number":1,"shape":"circle","shapeOptions":{"alpha":[0.2,0.5],"lineWidth":6,"radius":20}}]}');e.excludeElements=e.excludeelements,delete e.excludeelements,window.firework(e)}</script><div id=lazy-script><div><script src=/js/insert_highlight.js integrity crossorigin=anonymous data-pjax></script><script type=module data-pjax>
        const PhotoSwipeLightbox = (await safeImport("https:\/\/npm.webcache.cn\/photoswipe@5.4.4\/dist\/photoswipe-lightbox.esm.min.js", "sha384-DiL6M\/gG\u002bwmTxmCRZyD1zee6lIhawn5TGvED0FOh7fXcN9B0aZ9dexSF\/N6lrZi\/")).default;

        const pswp = () => {
          if (_$$('.article-entry a.article-gallery-item').length > 0) {
            new PhotoSwipeLightbox({
              gallery: '.article-entry',
              children: 'a.article-gallery-item',
              pswpModule: () => safeImport("https:\/\/npm.webcache.cn\/photoswipe@5.4.4\/dist\/photoswipe.esm.min.js", "sha384-WkkO3GCmgkC3VQWpaV8DqhKJqpzpF9JoByxDmnV8\u002boTJ7m3DfYEWX1fu1scuS4\u002bs")
            }).init();
          }
          if(_$$('.article-gallery a.article-gallery-item').length > 0) {
            new PhotoSwipeLightbox({
              gallery: '.article-gallery',
              children: 'a.article-gallery-item',
              pswpModule: () => safeImport("https:\/\/npm.webcache.cn\/photoswipe@5.4.4\/dist\/photoswipe.esm.min.js", "sha384-WkkO3GCmgkC3VQWpaV8DqhKJqpzpF9JoByxDmnV8\u002boTJ7m3DfYEWX1fu1scuS4\u002bs")
            }).init();
          }
          window.lightboxStatus = 'done';
          window.removeEventListener('lightbox:ready', pswp);
        }
        if(window.lightboxStatus === 'ready') {
          pswp()
        } else {
          window.addEventListener('lightbox:ready', pswp);
        }
      </script></div></div><script src=https://npm.webcache.cn/busuanzi@2.3.0/bsz.pure.mini.js async integrity=sha384-0M75wtSkhjIInv4coYlaJU83+OypaRCIq2SukQVQX04eGTCBXJDuWAbJet56id+S crossorigin=anonymous></script><script>"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(e=>{for(let t of e)t.unregister()})</script><script>const reimuCopyright=String.raw`
   ______     ______     __     __    __     __  __    
  /\  == \   /\  ___\   /\ \   /\ "-./  \   /\ \/\ \   
  \ \  __<   \ \  __\   \ \ \  \ \ \-./\ \  \ \ \_\ \  
   \ \_\ \_\  \ \_____\  \ \_\  \ \_\ \ \_\  \ \_____\ 
    \/_/ /_/   \/_____/   \/_/   \/_/  \/_/   \/_____/ 
                                                    
  `;console.log(String.raw`%c ${reimuCopyright}`,"color: #ff5252;"),console.log("%c Theme.Reimu %c https://github.com/D-Sketon/hugo-theme-reimu ","color: white; background: #ff5252; padding:5px 0;","padding:4px;border:1px solid #ff5252;")</script></body></html>